<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta content="no-title" name="x5-page-mode">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="telephone=no" name="format-detection">
    <title>Doox code generator</title>
    <link rel="icon" type="image/png" href="webjars/doox-generator-ui/favicon.ico?v=1.2.0"/>
    <link rel="stylesheet" type="text/css" href="webjars/doox-generator-ui/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="webjars/doox-generator-ui/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="webjars/doox-generator-ui/css/demo.css">
    <link rel="stylesheet" type="text/css" href="webjars/doox-generator-ui/doox.css?v=1.2.0"/>
    <link rel="stylesheet" type="text/css" href="webjars/doox-generator-ui/doox-generator.css?v=1.2.0"/>
</head>
<body class="easyui-layout">
<div data-options="region:'north',split:true" style="height:75px;padding:5px 5px 0;overflow:hidden;">
    <form id="connForm" method="post" action="session">
        <table border="0" cellpadding="0" cellspacing="0">
            <tr height="30px" id="connbg">
                <td>
                    <input id="connectDB" type="button" value=">> Connect DB >>"/>
                    jdbc:mysql://<input type="text" class="connectDB big_200" name="jdbcUrl" value="">
                </td>
                <td class="lable">User:</td>
                <td><input type="text" class="connectDB" name="jdbcUser" value=""/></td>
                <td class="lable">Password:</td>
                <td>
                    <input type="password" class="connectDB small" name="jdbcPassword" value="" autocomplete="off"/>
                </td>
            </tr>
            <tr height="30px">
                <td>
                    <input id="loadTables" type="button" value=">> Load tables >>"/>
                    <select name="tableName" t-data="">
                        <option value="">Select Table</option>
                    </select>
                </td>
                <td class="lable">Col-prefix:</td>
                <td><input type="text" name="colPrefix" value="" t-data="t_,"/></td>
                <td class="lable">Table-pack:</td>
                <td><input type="text" name="tablePack" value="" t-data=""/></td>
            </tr>
        </table>
    </form>
</div>
<div data-options="region:'south',split:true" style="height:30px;"></div>
<div data-options="region:'west',split:true" style="width:230px;">
    <table border="0" cellpadding="0" cellspacing="0">
        <tr height="30">
            <td class="lable">
                Author:
            </td>
            <td>
                <input type="text" class="big_140" name="author" value=""/>
            </td>
        </tr>
        <tr height="10">
            <td colspan="2">
                <hr/>
            </td>
        </tr>
        <tr height="30">
            <td class="lable">
                BaseDir:
            </td>
            <td>
                <input type="text" class="big_140" name="basedir" value=""/>
            </td>
        </tr>
        <tr height="30">
            <td colspan="2" style="text-align: center;">
                <input id="reloadProjectBtn" type="button" value="Reload Project"/>
            </td>
        </tr>
        <tr height="30">
            <td class="lable">
                Project:
            </td>
            <td>
                <!--<select name="pName">-->
                <!--<option value="">Select Project</option>-->
                <!--</select>-->
                <input type="text" class="big_140 readonly" name="pName" value="" readonly="true"/>
            </td>
        </tr>
        <tr height="30">
            <td class="lable">Path:</td>
            <td><input type="text" class="big_140 readonly" name="pPath" value="" readonly="true"></td>
        </tr>
        <tr height="30">
            <td class="lable">Type:</td>
            <td>
                <!--<input type="radio" name="pType" value="Single"/>Single-->
                <!--<input type="radio" name="pType" value="Multiple" checked="checked"/>Multiple-->
                <input type="text" class="big_140 readonly" name="pType" value="" readonly="true">
            </td>
        </tr>
        <tr height="30">
            <td class="lable">Package:</td>
            <td>
                <input type="text" class="waring big_140" name="pPackage" value="">
            </td>
        </tr>
        <tr height="10">
            <td colspan="2">
                <hr/>
            </td>
        </tr>
        <tr height="30">
            <td class="lable">Provide:</td>
            <td>
                <select name="provideModuleName">
                    <option value="">/</option>
                </select>
            </td>
        </tr>
        <tr height="30">
            <td class="lable">DAO:</td>
            <td>
                <select name="daoModuleName">
                    <option value="">/</option>
                </select>
            </td>
        </tr>
        <tr height="30">
            <td class="lable">Service:</td>
            <td>
                <select name="serviceModuleName">
                    <option value="">/</option>
                </select>
            </td>
        </tr>
        <tr height="30">
            <td class="lable">Web:</td>
            <td>
                <select name="webModuleName">
                    <option value="">/</option>
                </select>
            </td>
        </tr>
        <tr height="10">
            <td colspan="2">
                <hr/>
            </td>
        </tr>
        <tr height="30">
            <td colspan="2" style="padding-left: 10px">
                <strong>.</strong><input
                    type="text" class="big_180" name="relativePath" value=""/>
        </tr>
        <tr>
            <td colspan="2">
                <ul id="fileShow"></ul>
            </td>
        </tr>
    </table>
</div>
<div id="center" data-options="region:'center'" style="padding:5px;background:#eee;">
    <form id="generate_form" method="post" action="">
        <fieldset>
            <legend>
                <span style="font-weight: 700;">Table -> POJO</span>
            </legend>
            <table border="1" style="border-color: #6a6a6a;" cellpadding="0" cellspacing="0">
                <thead>
                <tr>
                    <th>field</th>
                    <th>type</th>
                    <th>collation</th>
                    <th>isNull</th>
                    <th>key</th>
                    <th>defaultValue</th>
                    <th>extra</th>
                    <th>privileges</th>
                    <th>comment</th>
                </tr>
                </thead>
                <tbody id="tableInfo">
                </tbody>
            </table>
            <div id="config_pojo_div"></div>
        </fieldset>
        <br/> <br/>
        <fieldset>
            <legend>
                <span style="font-weight: 700;"><input type="checkbox" name="provide_"
                                                       value="true">Module -> Provide</span>
            </legend>
            <table border="0" cellpadding="0" cellspacing="0">
                <tr>
                    <td class="lable"><input type="checkbox" name="provideO_" value="true"></td>
                    <td class="lable">Create O:</td>
                    <td>
                        <input type="text" name="provideOPackage" class="big_240 right" value="">
                    </td>
                    <td class="lable">.</td>
                    <td>
                        <input type="text" name="provideO" class="big_200" value="">
                    </td>
                </tr>
                <tr>
                    <td class="lable"><input type="checkbox" name="provideProvide_" value="true"></td>
                    <td class="lable">Create Provide:</td>
                    <td>
                        <input type="text" name="provideProvidePackage" class="big_240 right" value="">
                    </td>
                    <td class="lable">.</td>
                    <td>
                        <input type="text" name="provideProvide" class="big_200" value="">
                    </td>
                </tr>
            </table>
        </fieldset>
        <br/> <br/>
        <fieldset>
            <legend>
                <span style="font-weight: 700;"><input type="checkbox" name="dao_" value="true">Module -> Dao</span>
            </legend>
            <table border="0" cellpadding="0" cellspacing="0">
                <tr>
                    <td class="lable"><input type="checkbox" name="daoPO_" value="true"></td>
                    <td class="lable">Create PO:</td>
                    <td>
                        <input type="text" name="daoPOPackage" class="big_240 right" value="">
                    </td>
                    <td class="lable">.</td>
                    <td>
                        <input type="text" name="daoPO" class="big_200" value="">
                    </td>
                </tr>
                <tr>
                    <td class="lable"><input type="checkbox" name="daoMapper_" value="true"></td>
                    <td class="lable">Create Mapper:</td>
                    <td>
                        <input type="text" name="daoMapperPackage" class="big_240 right" value="">
                    </td>
                    <td class="lable">.</td>
                    <td>
                        <input type="text" name="daoMapper" class="big_200" value="">
                    </td>
                </tr>
                <tr>
                    <td class="lable"><input type="checkbox" name="daoJpa_" value="true"></td>
                    <td class="lable">Create Jpa:</td>
                    <td>
                        <input type="text" name="daoJpaPackage" class="big_240 right" value="">
                    </td>
                    <td class="lable">.</td>
                    <td>
                        <input type="text" name="daoJpa" class="big_200" value="">
                    </td>
                </tr>
                <tr>
                    <td class="lable"><input type="checkbox" name="daoCacheSupport_" value="true"></td>
                    <td class="lable">Create CacheSupport:</td>
                    <td>
                        <input type="text" name="daoCacheSupportPackage" class="big_240 right" value="">
                    </td>
                    <td class="lable">.</td>
                    <td>
                        <input type="text" name="daoCacheSupport" class="big_200" value="">
                    </td>
                </tr>
                <tr>
                    <td class="lable"><input type="checkbox" name="daoDAO_" value="true"></td>
                    <td class="lable">Create DAO:</td>
                    <td>
                        <input type="text" name="daoDAOPackage" class="big_240 right" value="">
                    </td>
                    <td class="lable">.</td>
                    <td>
                        <input type="text" name="daoDAO" class="big_200" value="">
                    </td>
                </tr>
                <tr>
                    <td class="lable"><input type="checkbox" name="daoDAOImpl_" value="true"></td>
                    <td class="lable">Create DAOImpl:</td>
                    <td>
                        <input type="text" name="daoDAOImplPackage" class="big_240 right" value="">
                    </td>
                    <td class="lable">.</td>
                    <td>
                        <input type="text" name="daoDAOImpl" class="big_200" value="">
                    </td>
                </tr>
                <tr>
                    <td class="lable"><input type="checkbox" name="daoDAOTest_" value="true"></td>
                    <td class="lable">Create DAOTest:</td>
                    <td>
                        <input type="text" name="daoDAOTestPackage" class="big_240 right" value="">
                    </td>
                    <td class="lable">.</td>
                    <td>
                        <input type="text" name="daoDAOTest" class="big_200" value="">
                    </td>
                </tr>
            </table>
        </fieldset>
        <br/> <br/>
        <fieldset>
            <legend>
                <span style="font-weight: 700;"><input type="checkbox" name="service_"
                                                       value="true">Module -> Service</span>
            </legend>
            <table border="0" cellpadding="0" cellspacing="0">
                <tr>
                    <td class="lable"><input type="checkbox" name="serviceService_" value="true"></td>
                    <td class="lable">Create Service:</td>
                    <td>
                        <input type="text" name="serviceServicePackage" class="big_240 right" value="">
                    </td>
                    <td class="lable">.</td>
                    <td>
                        <input type="text" name="serviceService" class="big_200" value="">
                    </td>
                </tr>
                <tr>
                    <td class="lable"><input type="checkbox" name="serviceServiceImpl_" value="true"></td>
                    <td class="lable">Create ServiceImpl:</td>
                    <td>
                        <input type="text" name="serviceServiceImplPackage" class="big_240 right" value="">
                    </td>
                    <td class="lable">.</td>
                    <td>
                        <input type="text" name="serviceServiceImpl" class="big_200" value="">
                    </td>
                </tr>
                <tr>
                    <td class="lable"><input type="checkbox" name="serviceServiceTest_" value="true"></td>
                    <td class="lable">Create ServiceTest:</td>
                    <td>
                        <input type="text" name="serviceServiceTestPackage" class="big_240 right" value="">
                    </td>
                    <td class="lable">.</td>
                    <td>
                        <input type="text" name="serviceServiceTest" class="big_200" value="">
                    </td>
                </tr>
            </table>
        </fieldset>
        <br/> <br/>
        <fieldset>
            <legend>
                <span style="font-weight: 700;"><input type="checkbox" name="web_" value="true">Module -> Web:</span>
            </legend>
            <table border="0" cellpadding="0" cellspacing="0">
                <tr>
                    <td class="lable"><input type="checkbox" name="webVO_" value="true"></td>
                    <td class="lable">Create VO:</td>
                    <td>
                        <input type="text" name="webVOPackage" class="big_240 right" value="">
                    </td>
                    <td class="lable">.</td>
                    <td>
                        <input type="text" name="webVO" class="big_200" value="">
                    </td>
                </tr>
                <tr>
                    <td class="lable"><input type="checkbox" name="webController_" value="true"></td>
                    <td class="lable">Create Controller:</td>
                    <td>
                        <input type="text" name="webControllerPackage" class="big_240 right" value="">
                    </td>
                    <td class="lable">.</td>
                    <td>
                        <input type="text" name="webController" class="big_200" value="">
                    </td>
                </tr>
            </table>
        </fieldset>
        <br/>
        <input id="generate_btn" type="button" value="Generate Code"
               style="width: 150px; height: 32px; background-color: orange;"/>
    </form>
</div>
<script type="text/javascript" src="webjars/doox-generator-ui/jquery/jquery.min.js"></script>
<script type="text/javascript" src="webjars/doox-generator-ui/jquery/jquery.easyui.min.js"></script>
<script type="text/javascript" src="webjars/doox-generator-ui/jquery/jquery.easyui.nqcx.js"></script>
<script type="text/javascript" src="webjars/doox-generator-ui/doox-generator.js?v=1.2.0"></script>
<script type="text/javascript">
    var db = {
        connbg: function () {
            return $('#connbg');
        },
        jdbcUrl: function () {
            return $('input[name="jdbcUrl"]');
        },
        jdbcUser: function () {
            return $('input[name="jdbcUser"]');
        },
        jdbcPassword: function () {
            return $('input[name="jdbcPassword"]');
        },
        conned: false,
        connChanged: false,
        connTip: function () {
            if (!this.conned || this.connChanged)
                this.connbg().addClass("error");
            else
                this.connbg().removeClass("error");
        },
        connWatchers: [],
        _init: function () {
            this.conned = false;
            this.connChanged = false;
            this.connTip();

            var _this = this;
            nqcxGet('generator-api/connection/info', {}, function (result) {
                if (result.success && result.result) {
                    _this.jdbcUrl().val(result.result.jdbcUrl);
                    _this.jdbcUser().val(result.result.jdbcUser);
                    _this.jdbcPassword().val(result.result.jdbcPassword);
                } else {
                    $.messager.show({
                        title: 'Error',
                        msg: 'Load connection info fail！'
                    });
                }
            });
        },
        conn: function () {
            var _this = this;

            _this.conned = false;
            _this.connChanged = true;
            _this.connTip();

            $('#connForm').form('nqcxSubmit', {
                url: "generator-api/connection/connect",
                dataType: 'json',
                onSubmit: function () {
                    return $(this).form('validate');
                },
                success: function (response) {
                    if (response && response.success) {
                        _this.conned = true;
                        _this.connChanged = false;
                        _this.connTip();
                    } else {
                        $.messager.show({
                            title: 'Error',
                            msg: response.errorText || 'error'
                        });
                    }

                    _this.connWatchers.forEach((watcher) => {
                        watcher();
                    });
                },
                error: function () {
                    $.messager.show({
                        title: 'Error',
                        msg: 'Connect db fail! Please try again later.'
                    });

                    _this.connWatchers.forEach((watcher) => {
                        watcher();
                    });
                }
            });
        }
    };  // end of db

    // 注册重连方法
    nqcxPost.retryConnect = db.conn;
    nqcxGet.retryConnect = db.conn;

    // Connect db and load table
    $('.connectDB').keyup(function (event) {
        db.connChanged = true;
        db.connTip();

        if ((event.keyCode || event.which) === 13) {
            event.preventDefault();
            db.conn();
        }
    });
    $('#connectDB').click(function () {
        db.conn();
    });
</script>
<script type="text/javascript">
    // table
    var table = {
        tableName: function () {
            return $('select[name="tableName"]');
        },
        colPrefix: function () {
            return $('input[name="colPrefix"]');
        },
        tablePack: function () {
            return $('input[name="tablePack"]');
        },
        _init: function () {
            this.tableName().val(this.tableName().attr('t-data'));
            this.tableNameWatchers.forEach((watcher) => {
                watcher();
            });

            this.colPrefixReset();
            this.tablePackReset();
        },
        _reset: function () {
            this.emptyTables();
            this._init();
        },
        _reload: function () {
            // 取当前 table name
            var tableNameValue = this.tableName().val();
            var colPrefixValue = this.colPrefix().val();
            var tablePackValue = this.tablePack().val();

            this.emptyTables();
            this._init();

            this.loadTables(tableNameValue, colPrefixValue, tablePackValue);
        },
        tableNameWatchers: [],
        emptyTables: function () {
            $('select[name="tableName"] option').each(function () {
                if ($(this).val()) {
                    $(this).remove();
                }
            });
        },
        loadTables: function (tableNameValue, colPrefixValue, tablePackValue) {
            var _this = this;
            nqcxGet("generator-api/table/list", {}, function (response) {
                if (response.success && response.list && response.list instanceof Array) {
                    response.list.forEach((item) => {
                        _this.loadTablesAppend(item.name, item.name);
                    });

                    $.messager.show({
                        title: 'Success',
                        msg: 'Table loaded.'
                    });
                } else {
                    $.messager.show({
                        title: 'Success',
                        msg: 'Table load fail!'
                    });
                }

                _this.changeTable(tableNameValue, colPrefixValue, tablePackValue);
            });
        },
        loadTablesAppend: function (value, text) {
            $('<option value="' + value + '">' + text + '</option>').appendTo(this.tableName());
        },
        changeTable(lastTableName, lastColPrefixValue, lastTablePackValue) {
            $('select[name="tableName"] option').each(function () {
                var value = $(this).val();
                if (lastTableName && lastTableName === value) {
                    $(this).prop("selected", true);
                }
            });

            var tableNameValue = this.tableName().val() || this.tableName().attr('t-data');
            this.tableNameWatchers.forEach((watcher) => {
                watcher();
            });

            if (!this.colPrefixChanged)
                this.colPrefix().val(this.colPrefix().attr('t-data'));
            this.colPrefixWatchers.forEach((watcher) => {
                watcher();
            });

            if (!this.tablePackChanged && tableNameValue)
                this.tablePack().val(tableNameValue.replaceFirstLow());
            this.tablePackWatchers.forEach((watcher) => {
                watcher();
            });
        },
        colPrefixChanged: false,
        colPrefixTip: function () {
            if (this.colPrefixChanged) {
                this.colPrefix().addClass("waring");
            } else {
                this.colPrefix().removeClass("waring");
            }
        },
        colPrefixReset: function () {
            this.colPrefix().val(this.colPrefix().attr('t-data'));
            this.colPrefixChanged = false;
            this.colPrefixTip();

            this.colPrefixWatchers.forEach((watcher) => {
                watcher();
            });
        },
        colPrefixWatchers: [],
        colPrefixChange: function () {
            this.colPrefixWatchers.forEach((watcher) => {
                watcher();
            });
        },
        tablePackChanged: false,
        tablePackTip: function () {
            if (this.tablePackChanged) {
                this.tablePack().addClass("waring");
            } else {
                this.tablePack().removeClass("waring");
            }
        },
        tablePackReset: function () {
            this.tablePack().val(this.tablePack().attr('t-data'));
            this.tablePackChanged = false;
            this.tablePackTip();

            var tableNameValue = this.tableName().val() || this.tableName().attr('t-data');
            this.tablePack().val(tableNameValue.replaceFirstLow());

            this.tablePackWatchers.forEach((watcher) => {
                watcher();
            });
        },
        tablePackWatchers: [],
        tablePackChange: function () {
            this.tablePackWatchers.forEach((watcher) => {
                watcher();
            });
        }
    }; // end of table

    // 注册 watcher
    db.connWatchers.push(() => {
        if (!db.conned)
            table._reset();
        else
            table._reload();
    });

    // 注册事件
    $('#loadTables').click(() => db.conn());

    table.tableName().change(() => table.changeTable());
    table.colPrefix().keyup(() => {
        table.colPrefixChanged = true;
        table.colPrefixTip();
        table.colPrefixChange();

        if ((event.keyCode || event.which) === 13) {
            if (!table.colPrefix().val()) {
                table.colPrefixReset();
            }
        }
    });
    table.tablePack().keyup(() => {
        table.tablePackChanged = true;
        table.tablePackTip();
        table.tablePackChange();

        if ((event.keyCode || event.which) === 13) {
            if (!table.tablePack().val()) {
                table.tablePackReset();
            }
        }
    });
</script>

<script type="text/javascript">
    var project = {
        authorElement: function () {
            return $('input[name="author"]');
        },
        basedirElement: function () {
            return $('input[name="basedir"]');
        },
        reloadProjectBtn: function () {
            return $('#reloadProjectBtn');
        },
        pName: function () {
            return $('input[name="pName"]');
        },
        pPath: function () {
            return $('input[name="pPath"]');
        },
        pPackage: function () {
            return $('input[name="pPackage"]');
        },
        pType: function () {
            return $('input[name="pType"]');
        },
        author: '',
        authorChanged: false,
        authorChangedTip: function () {
            if (this.authorChanged)
                this.authorElement().addClass("error");
            else
                this.authorElement().removeClass("error");
        },
        loadAuthor: function () {
            var _this = this;
            nqcxPost("generator-api/project/author", {}, function (response) {
                if (response.success) {
                    _this.author = response.object;
                    _this.authorElement().val(_this.author);
                    _this.authorChanged = false;
                    _this.authorChangedTip();
                } else {
                    $.messager.show({
                        title: 'Error',
                        msg: 'Load author fail！'
                    });
                }
            });
        },
        saveAuthor: function (author) {
            if (!author)
                author = '';

            var _this = this;
            nqcxPost("generator-api/project/author/change", {author: author}, function (response) {
                if (response.success) {
                    _this.author = response.object;
                    _this.authorElement().val(_this.author);
                    _this.authorChanged = false;
                    _this.authorChangedTip();
                } else {
                    $.messager.show({
                        title: 'Error',
                        msg: 'Change author fail！'
                    });
                }
            });
        },
        basedir: '',
        basedirChanged: false,
        basedirChangedTip: function () {
            if (this.basedirChanged)
                this.basedirElement().addClass("error");
            else
                this.basedirElement().removeClass("error");
        },
        loadBasedir: function (callback, errorCallback) {
            var _this = this;

            nqcxGet('generator-api/project/basedir', {}, function (response) {
                if (response.success && response.object) {
                    _this.basedir = response.object;
                    _this.basedirElement().val(_this.basedir);

                    _this.basedirChanged = false;
                    _this.basedirChangedTip();

                    if (callback)
                        callback(_this.basedir);
                } else {
                    $.messager.show({
                        title: 'Error',
                        msg: 'Load basedir fail！'
                    });

                    if (errorCallback)
                        errorCallback(_this.basedir);
                }
            });
        },
        changeBasedir: function (basedir, callBack, errorCallBack) {
            var basedirDecode = decodeURIComponent(basedir);
            if (!basedirDecode)
                return;

            var _this = this;
            nqcxPost("generator-api/project/basedir/change", {"basedir": basedirDecode}, function (response) {
                if (response && response.success) {
                    _this.basedirChanged = false;
                    _this.basedirChangedTip();

                    if (callBack)
                        callBack(basedirDecode);
                } else {
                    $.messager.show({
                        title: 'Error',
                        msg: 'Change basedir fail！'
                    });

                    if (errorCallBack)
                        errorCallBack(basedirDecode);
                }
            });
        },
        _p: {}, // project
        _loaded: false,
        _init: function () {
            var _this = this;

            this.loadAuthor();
            this.loadBasedir(function (basedir) {
                _this._load(basedir);
            });
        },
        _load: function (basedir) {
            var _this = this;
            _this._p = {};
            _this._loaded = false;

            var params = {};
            if (basedir)
                params.basedir = basedir;

            nqcxGet('generator-api/project/info', params, function (response) {
                if (response.success && response.object) {
                    _this._p = response.object;

                    //basedir
                    _this.basedir = _this._p.projectPath;
                    // name path type
                    _this.pName().val(_this._p.artifactId || _this._p.baseName);
                    _this.pPath().val(_this._p.projectPath);
                    _this.pType().val(_this._p.projectType);
                    // package
                    _this.pPackage().val(_this._p.groupId);
                    _this.pPackageChange();
                    _this.pPackageChanged = false;
                    _this.pPackageTip();

                    _this._loaded = true;

                    // modules
                    if (_this._p.modules)
                        _this.module.fillAll()
                    else
                        _this.module.emptyAll();

                    // change
                    _this._change();
                } else {
                    $.messager.show({
                        title: 'Error',
                        msg: 'Load project info fail！'
                    });
                }
            });
        },
        _clear: function () {
            this._p = {};
            this._loaded = false;

            //  name path type
            this.pName().val('');
            this.pPath().val('');
            this.pType().val('');

            // package
            this.pPackage().val('');
            this.pPackageChange();
            this.pPackageChanged = false;
            this.pPackageTip();

            // modules
            this.module.emptyAll();

            path.setRelativePath('');
            path.loadCgFile('', []);
        },
        _change: function () {
            path.openFile();
        },
        pPackageChange: function () {
            this.pPackageWatchers.forEach((watcher) => {
                watcher();
            });
        },
        pPackageChanged: false,
        pPackageTip: function () {
            if (this.pPackageChanged) {
                this.pPackage().addClass("waring");
            } else {
                this.pPackage().removeClass("waring");
            }
        },
        pPackageReset: function () {
            this.pPackage().val(this._p.groupId);
            this.pPackageChanged = false;
            this.pPackageTip();

            this.pPackageWatchers.forEach((watcher) => {
                watcher();
            });
        },
        pPackageWatchers: [],
        module: {
            provide: function () {
                return $('select[name="provideModuleName"]');
            },
            dao: function () {
                return $('select[name="daoModuleName"]');
            },
            service: function () {
                return $('select[name="serviceModuleName"]');
            },
            web: function () {
                return $('select[name="webModuleName"]');
            },
            fillAll: function () {
                var _this = this;

                _this.emptyAll();

                // provide
                _this.fill(_this.provide().attr("name"), project.pName().val() + '-provide');
                // dao
                _this.fill(_this.dao().attr("name"), project.pName().val() + '-dao');
                // service
                _this.fill(_this.service().attr("name"), project.pName().val() + '-service');
                // web
                _this.fill(_this.web().attr("name"), project.pName().val() + '-web');
            },
            fill: function (name, defaultModule) {
                var select = $('select[name="' + name + '"]');
                var ml = project._p.modules;
                for (var idx in ml) {
                    if (defaultModule && defaultModule === ml[idx])
                        $('<option selected="selected" value="' + ml[idx] + '">' + ml[idx] + '</option>').appendTo(select);
                    else
                        $('<option value="' + ml[idx] + '">' + ml[idx] + '</option>').appendTo(select);
                }
            },
            emptyAll: function () {
                // provide
                this.empty(this.provide());
                // dao
                this.empty(this.dao());
                // service
                this.empty(this.service());
                // web
                this.empty(this.web());
            },
            empty: function (module) {
                $('option', module).each(function () {
                    if ($(this).val()) {
                        $(this).remove();
                    }
                });
            },
            changeWatchars: [],
            change: function () {
                this.changeWatchars.forEach((watcher) => {
                    watcher();
                });
            }
        }
    };  // end of project

    // table
    table.tablePackWatchers.push(function () {
        project.module.change();
    });

    // project
    project.authorElement().keyup(function (event) {
        project.authorChanged = true;
        project.authorChangedTip();

        project.saveAuthor($(this).val());
    });
    project.reloadProjectBtn().click(function (event) {
        project._init();
    });
    project.basedirElement().keyup(function (event) {
        var basedir = $(this).val();

        project.basedirChanged = false;
        if (basedir !== project.basedir)
            project.basedirChanged = true;
        project.basedirChangedTip();

        project.changeBasedir(basedir, function (basedir) {
            project._load(basedir);
        }, function (basedir) {
            project._clear();
        });
    });

    project.pPackageWatchers.push(() => project.module.change());

    project.pPackage().keyup((event) => {
        project.pPackageChanged = true;
        project.pPackageTip();
        project.pPackageChange();

        if ((event.keyCode || event.which) === 13) {
            if (!project.pPackage().val()) {
                project.pPackageReset();
            }
        }
    });
</script>
<script type="text/javascript">
    var path = {
        relativePath: function () {
            return $('input[name="relativePath"]');
        },
        fileShow: function () {
            return $('#fileShow');
        },
        setRelativePath: function (value) {
            this.relativePath().val(value);
        },
        enterKeyDown: function (event) {
            if ((event.keyCode || event.which) === 13) {
                event.preventDefault();

                var relativePathValue = this.relativePath().val();

                if (!relativePathValue)
                    relativePathValue = '/';

                if (relativePathValue.indexOf('/') === -1)
                    relativePathValue = '/' + relativePathValue;

                if (relativePathValue.length > 1 && relativePathValue.endWith('/'))
                    relativePathValue = relativePathValue.substring(0, relativePathValue.lastIndexOf('/'));

                this.openFile(relativePathValue.substring(0, relativePathValue.lastIndexOf('/') + 1), relativePathValue.substring(relativePathValue.lastIndexOf('/') + 1, relativePathValue.length));
            }
        },
        openFile: function (pathValue, nameValue) {
            if (!project._loaded) {
                $.messager.show({
                    title: 'Error',
                    msg: 'Basedir not exists.'
                });

                return;
            }
            var basedir = project.basedir;

            if (!pathValue)
                pathValue = '';
            if (!nameValue)
                nameValue = '';

            var url = 'generator-api/project/openFile';
            nqcxPost(url, {
                basedir: basedir,
                path: pathValue,
                name: nameValue
            }, function (result) {
                var relativePathPath = '/';
                var relativePathName = '';
                var cgFileListValue = [];
                if (result.success) {
                    if (result.object) {
                        relativePathPath = result.object.path;
                        relativePathName = result.object.name;
                    }
                    if (result.object.cgFileList)
                        cgFileListValue = result.object.cgFileList;
                }
                path.setRelativePath(relativePathPath + relativePathName);
                path.loadCgFile(relativePathPath, cgFileListValue);
            });
        },
        loadCgFile: function (pathValue, cgFileList) {
            var cgFileHtml = '';
            if (pathValue)
                cgFileHtml += '<li><a href="javascript:void(0);" onclick="path.openFile(\'' + pathValue + '\',\'\');">..</a></li>';
            for (var idx in cgFileList) {
                if (cgFileList[idx].file)
                    cgFileHtml += '<li>' + cgFileList[idx].name + '</li>';
                else
                    cgFileHtml += '<li><a href="javascript:void(0);" onclick="path.openFile(\'' + cgFileList[idx].path + '\',\'' + cgFileList[idx].name + '\');">' + cgFileList[idx].name + '</a></li>';
            }
            this.fileShow().html(cgFileHtml);
        }
    }; // end of path

    path.relativePath().keydown(function (e) {
        path.enterKeyDown(e);
    });
</script>
<script type="text/javascript">
    var tableInfo = {
        projectDiv: function () {
            return $('#config_pojo_div');
        },
        info: function () {
            return $('tbody#tableInfo');
        },
        addInfo: function (columns) {
            if (!columns && columns.length === 0)
                return;
            this.info().html('');

            for (var idx in columns) {
                var colstr = '<tr>';
                colstr += '<td>' + columns[idx].field + '</td>';
                colstr += '<td>' + columns[idx].type + '</td>';
                colstr += '<td>' + columns[idx].collation + '</td>';
                colstr += '<td>' + columns[idx].isNull + '</td>';
                colstr += '<td>' + columns[idx].key + '</td>';
                colstr += '<td>' + columns[idx].defaultValue + '</td>';
                colstr += '<td>' + columns[idx].extra + '</td>';
                colstr += '<td>' + columns[idx].privileges + '</td>';
                colstr += '<td>' + columns[idx].comment + '</td>';
                colstr += '</tr>';

                this.info().append(colstr);
            }
        },
        _init: function () {
            this.loadTable()
        },
        loadTable: function () {
            var tableName = table.tableName().val();
            if (!tableName) {
                this.resetTable();
                this.resetConfig()
                return;
            }

            var columns = [];
            nqcxGet("generator-api/table/get/" + tableName, {}, function (result) {
                if (result.object && result.object.columns) {
                    columns = result.object.columns;
                }
                tableInfo.addInfo(columns);
                tableInfo.config(columns);
            });
        },
        resetTable: function () {
            this.info().html('');
        },
        config: function (columns) {
            var tableName = table.tableName().val();
            if (!tableName)
                return;

            var tableHtml = '<hr />';
            tableHtml += '<table border="0" cellpadding="0" cellspacing="0">';
            for (idx in columns) {
                tableHtml += '<tr>' + this.row1(columns[idx]) + '</tr>';
            }
            tableHtml += '</table>';
            this.projectDiv().html(tableHtml);
        },
        resetConfig: function () {
            this.projectDiv().html('');
        },
        row1: function (column) {
            var rowHtml = '';
            var field = column.field;
            var type = column.type;
            var field_ = this.toField(field);
            var type_ = this.toType(type);
            var show = 'private ' + type_ + ' ' + field_ + ";";

            rowHtml += '<td><input id="pojoColumn_' + field + '" type="text" name="pojoColumn" class="big_200" value="' + field + '" readonly="true" /></td>';
            rowHtml += '<td>' + type + '</td>';
            rowHtml += '<td><input id="pojoField_' + field + '" type="text" name="pojoField" class="big_200" value="' + field_ + '" onkeyup="tableInfo.show1(\'' + field + '\')" onafterpaste="tableInfo.show1(\'' + field + '\')" onblur="tableInfo.show1(\'' + field + '\')" /></td>';
            rowHtml += '<td><input id="pojoType_' + field + '" type="text" name="pojoType" class="big" value="' + type_ + '" onkeyup="tableInfo.show1(\'' + field + '\')" onafterpaste="tableInfo.show1(\'' + field + '\')" onblur="tableInfo.show1(\'' + field + '\')" /></td>';
            rowHtml += '<td><span id="jojoText_' + field + '">' + show + '</span></td>';

            return rowHtml;
        },
        show1: function (suffix) {
            var field_ = document.getElementById('pojoField_' + suffix).value;
            var type_ = document.getElementById('pojoType_' + suffix).value;
            var show1 = 'private ' + type_ + ' ' + field_ + ";";
            $('#jojoText_' + suffix).html(show1);
        },
        toField: function (input) {
            var prefix = table.colPrefix().val();
            var ps = prefix.split(',');
            if (ps != null && ps.length > 0) {
                for (var idx in ps) {
                    if (!ps[idx])
                        continue;
                    input = input.replace(new RegExp('^' + ps[idx], 'g'), '');
                }
            }
            return input.replaceFirstUP().replaceFirstLow();
        },
        toType: function (input) {
            if (input.startWith('bigint'))
                return "long";
            else if (input.startWith('int'))
                return "int";
            else if (input.startWith('tinyint'))
                return "int";
            else if (input.startWith('float'))
                return "float";
            else if (input.startWith('decimal'))
                return "BigDecimal";
            else if (input.startWith('varchar') || input.startWith('text'))
                return "String";
            else if (input.startWith('datetime') || input.startWith('date') || input.startWith('timestamp'))
                return "Date";
            else if (input.startWith('blob'))
                return "byte[]";
            else
                return input;
        }
    };

    // 注册事件
    table.tableNameWatchers.push(() => tableInfo._init());
    table.colPrefixWatchers.push(() => tableInfo.loadTable());
</script>
<script type="text/javascript">
    var provide = {
        _: function () {
            return $('input[name="provide_"]');
        },
        provideO_: function () {
            return $('input[name="provideO_"]');
        },
        provideOPackage: function () {
            return $('input[name="provideOPackage"]');
        },
        provideO: function () {
            return $('input[name="provideO"]');
        },
        provideProvide_: function () {
            return $('input[name="provideProvide_"]');
        },
        provideProvidePackage: function () {
            return $('input[name="provideProvidePackage"]');
        },
        provideProvide: function () {
            return $('input[name="provideProvide"]');
        },
        _init: function () {
            this._().prop("checked", false);

            this.provideO_().prop("checked", false);
            this.provideOPackage().val('');
            this.provideO().val('');

            this.provideProvide_().prop("checked", false);
            this.provideProvidePackage().val('');
            this.provideProvide().val('');
        },
        _reset: function () {
            this._init();
        },
        loadPackage: function () {
            // project package value
            var pValue = project.pPackage().val() || '';

            var tablePack = table.tablePack().val();

            var tableName = table.tableName().val();
            if (!tableName) {
                this._reset();
                return;
            }

            var provideName = tableName.replaceFirstUP();
            var provideO = provideName;
            var provideProvide = 'I' + provideName + 'Provide';

            var poValue = pValue + '.data.o' + (tablePack ? "." + tablePack : "");
            if (poValue.indexOf(".") === 0 && poValue.length > 1)
                poValue = poValue.substring(1);

            var ppValue = pValue + '.provide' + (tablePack ? "." + tablePack : "");
            if (ppValue.indexOf(".") === 0 && ppValue.length > 1)
                ppValue = ppValue.substring(1);

            // set value
            this.provideOPackage().val(poValue);
            this.provideO().val(provideO);

            this.provideProvidePackage().val(ppValue);
            this.provideProvide().val(provideProvide);
        }
    };

    table.tableNameWatchers.push(() => provide.loadPackage());
    project.module.changeWatchars.push(() => provide.loadPackage());
</script>
<script type="text/javascript">
    var dao = {
        _: function () {
            return $('input[name="dao_"]');
        },
        daoPO_: function () {
            return $('input[name="daoPO_"]');
        },
        poPackage: function () {
            return $('input[name="daoPOPackage"]');
        },
        po: function () {
            return $('input[name="daoPO"]');
        },
        daoMapper_: function () {
            return $('input[name="daoMapper_"]');
        },
        mapperPackage: function () {
            return $('input[name="daoMapperPackage"]');
        },
        mapper: function () {
            return $('input[name="daoMapper"]');
        },
        daoJpa_: function () {
            return $('input[name="daoJpa_"]');
        },
        jpaPackage: function () {
            return $('input[name="daoJpaPackage"]');
        },
        jpa: function () {
            return $('input[name="daoJpa"]');
        },
        daoCacheSupport_: function () {
            return $('input[name="daoCacheSupport_"]');
        },
        daoCacheSupportPackage: function () {
            return $('input[name="daoCacheSupportPackage"]');
        },
        daoCacheSupport: function () {
            return $('input[name="daoCacheSupport"]');
        },
        daoDAO_: function () {
            return $('input[name="daoDAO_"]');
        },
        daoPackage: function () {
            return $('input[name="daoDAOPackage"]');
        },
        dao: function () {
            return $('input[name="daoDAO"]');
        },
        daoDAOImpl_: function () {
            return $('input[name="daoDAOImpl_"]');
        },
        daoImplPackage: function () {
            return $('input[name="daoDAOImplPackage"]');
        },
        daoImpl: function () {
            return $('input[name="daoDAOImpl"]');
        },
        daoDAOTest_: function () {
            return $('input[name="daoDAOTest_"]');
        },
        testPackage: function () {
            return $('input[name="daoDAOTestPackage"]');
        },
        test: function () {
            return $('input[name="daoDAOTest"]');
        },
        _init: function () {
            this._().prop("checked", false);

            this.daoPO_().prop("checked", false);
            this.poPackage().val('');
            this.po().val('');
            this.daoMapper_().prop("checked", false);
            this.mapperPackage().val('');
            this.mapper().val('');
            this.daoJpa_().prop("checked", false);
            this.jpaPackage().val('');
            this.jpa().val('');
            this.daoCacheSupport_().prop("checked", false);
            this.daoCacheSupportPackage().val('');
            this.daoCacheSupport().val('');
            this.daoDAO_().prop("checked", false);
            this.daoPackage().val('');
            this.dao().val('');
            this.daoDAOImpl_().prop("checked", false);
            this.daoImplPackage().val('');
            this.daoImpl().val('');
            this.daoDAOTest_().prop("checked", false);
            this.testPackage().val('');
            this.test().val('');
        },
        _reset() {
            this._init();
        },
        loadPackage: function () {
            // project pakcage value
            var pValue = project.pPackage().val() || '';

            var tablePack = table.tablePack().val();

            var tableName = table.tableName().val();
            if (!tableName) {
                this._reset();
                return;
            }

            var daoName = tableName.replaceFirstUP();
            var daoPO = daoName + "PO";
            var daoMapper = 'I' + daoName + 'Mapper';
            var daoJpa = 'I' + daoName + 'Jpa';
            var daoCacheSupport = 'CacheSupport';
            var daoDao = 'I' + daoName + 'DAO';
            var daoDaoImpl = daoName + 'DAO';
            var daoTest = daoDaoImpl + 'Test';

            var poValue = pValue + '.data.po' + (tablePack ? "." + tablePack : "");
            if (poValue.indexOf(".") === 0 && poValue.length > 1)
                poValue = poValue.substring(1);

            var mapperValue = pValue + '.data.mapper' + (tablePack ? "." + tablePack : "");
            if (mapperValue.indexOf(".") === 0 && mapperValue.length > 1)
                mapperValue = mapperValue.substring(1);

            var jpaValue = pValue + '.data.jpa' + (tablePack ? "." + tablePack : "");
            if (jpaValue.indexOf(".") === 0 && jpaValue.length > 1)
                jpaValue = jpaValue.substring(1);

            var cacheValue = pValue + '.data.cache';
            if (cacheValue.indexOf(".") === 0 && cacheValue.length > 1)
                cacheValue = cacheValue.substring(1);

            var daoValue = pValue + '.dao' + (tablePack ? "." + tablePack : "");
            if (daoValue.indexOf(".") === 0 && daoValue.length > 1)
                daoValue = daoValue.substring(1);

            var daoImplValue = daoValue + '.impl';
            if (daoImplValue.indexOf(".") === 0 && daoImplValue.length > 1)
                daoImplValue = daoImplValue.substring(1);

            var testValue = pValue + '.dao' + (tablePack ? "." + tablePack : "");
            if (testValue.indexOf(".") === 0 && testValue.length > 1)
                testValue = testValue.substring(1);

            // set value
            this.poPackage().val(poValue);
            this.po().val(daoPO);
            this.mapperPackage().val(mapperValue);
            this.mapper().val(daoMapper);
            this.jpaPackage().val(jpaValue);
            this.jpa().val(daoJpa);
            this.daoCacheSupportPackage().val(cacheValue);
            this.daoCacheSupport().val(daoCacheSupport);
            this.daoPackage().val(daoValue);
            this.dao().val(daoDao);
            this.daoImplPackage().val(daoImplValue);
            this.daoImpl().val(daoDaoImpl);
            this.testPackage().val(testValue);
            this.test().val(daoTest);
        }
    };

    table.tableNameWatchers.push(() => dao.loadPackage());
    project.module.changeWatchars.push(() => dao.loadPackage());
</script>
<script type="text/javascript">
    var service = {
        _: function () {
            return $('input[name="service_"]');
        },
        serviceService_: function () {
            return $('input[name="serviceService_"]');
        },
        serviceServicePackage: function () {
            return $('input[name="serviceServicePackage"]');
        },
        serviceService: function () {
            return $('input[name="serviceService"]');
        },
        serviceServiceImpl_: function () {
            return $('input[name="serviceServiceImpl_"]');
        },
        serviceImplPackage: function () {
            return $('input[name="serviceServiceImplPackage"]');
        },
        serviceImpl: function () {
            return $('input[name="serviceServiceImpl"]');
        },
        serviceServiceTest_: function () {
            return $('input[name="serviceServiceTest_"]');
        },
        serviceTestPackage: function () {
            return $('input[name="serviceServiceTestPackage"]');
        },
        serviceTest: function () {
            return $('input[name="serviceServiceTest"]');
        },
        _init: function () {
            this._().prop("checked", false);

            this.serviceService_().prop("checked", false);
            this.serviceServicePackage().val('');
            this.serviceService().val('');
            this.serviceServiceImpl_().prop("checked", false);
            this.serviceImplPackage().val('');
            this.serviceImpl().val('');
            this.serviceServiceTest_().prop("checked", false);
            this.serviceTestPackage().val('');
            this.serviceTest().val('');
        },
        _reset: function () {
            this._init();
        },
        loadPackage: function () {
            // project pakcage value
            var pValue = project.pPackage().val() || '';

            var tablePack = table.tablePack().val();

            var tableName = table.tableName().val();
            if (!tableName) {
                this._reset();
                return;
            }

            var serviceName = tableName.replaceFirstUP();
            var serviceService = 'I' + serviceName + "Service";
            var serviceServiceImpl = serviceName + "Service"
            var serviceServiceTest = serviceServiceImpl + "Test"


            var ssValue = pValue + '.service' + (tablePack ? "." + tablePack : "");
            if (ssValue.indexOf(".") === 0 && ssValue.length > 1)
                ssValue = ssValue.substring(1);

            var ssiValue = ssValue + '.impl';
            if (ssiValue.indexOf(".") === 0 && ssiValue.length > 1)
                ssiValue = ssiValue.substring(1);

            var sstValue = pValue + '.service' + (tablePack ? "." + tablePack : "");
            if (sstValue.indexOf(".") === 0 && sstValue.length > 1)
                sstValue = sstValue.substring(1);

            // set value
            this.serviceServicePackage().val(ssValue);
            this.serviceService().val(serviceService);
            this.serviceImplPackage().val(ssiValue);
            this.serviceImpl().val(serviceServiceImpl);
            this.serviceTestPackage().val(sstValue);
            this.serviceTest().val(serviceServiceTest);
        }
    };

    table.tableNameWatchers.push(() => service.loadPackage());
    project.module.changeWatchars.push(() => service.loadPackage());
</script>
<script type="text/javascript">
    var web = {
        _: function () {
            return $('input[name="web_"]');
        },
        webVO_: function () {
            return $('input[name="webVO_"]');
        },
        webVOPackage: function () {
            return $('input[name="webVOPackage"]');
        },
        webVO: function () {
            return $('input[name="webVO"]');
        },
        webController_: function () {
            return $('input[name="webController_"]');
        },
        webControllerPackage: function () {
            return $('input[name="webControllerPackage"]');
        },
        webController: function () {
            return $('input[name="webController"]');
        },
        _init: function () {
            this._().prop("checked", false);

            this.webVO_().prop("checked", false);
            this.webVOPackage().val('');
            this.webVO().val('');
            this.webController_().prop("checked", false);
            this.webControllerPackage().val('');
            this.webController().val('');
        },
        _reset: function () {
            this._init();
        },
        loadPackage: function () {
            // project pakcage value
            var pValue = project.pPackage().val() || '';

            var tablePack = table.tablePack().val();

            var tableName = table.tableName().val();
            if (!tableName) {
                this._reset();
                return;
            }

            var webName = tableName.replaceFirstUP();
            var webVO = webName + "VO";
            var webController = webName + "Controller";

            var wvValue = pValue + '.data.vo' + (tablePack ? "." + tablePack : "");
            if (wvValue.indexOf(".") === 0 && wvValue.length > 1)
                wvValue = wvValue.substring(1);

            var wcValue = pValue + '.web.controller' + (tablePack ? "." + tablePack : "");
            if (wcValue.indexOf(".") === 0 && wcValue.length > 1)
                wcValue = wcValue.substring(1);

            // set value
            this.webVOPackage().val(wvValue);
            this.webVO().val(webVO);
            this.webControllerPackage().val(wcValue);
            this.webController().val(webController);
        }
    };

    table.tableNameWatchers.push(() => web.loadPackage());
    project.module.changeWatchars.push(() => web.loadPackage());
</script>
<script type="text/javascript">
    var checkForm = function () {
        if (!ws.wsPathExists || !ws.wsPath().val()) {
            $.messager.show({
                title: 'Error',
                msg: 'WS not exists.'
            });
            return false;
        } else if (!ws.author().val()) {
            $.messager.show({
                title: 'Error',
                msg: 'Please input author.'
            });
            return false;
        } else if (!project.pName().val()) {
            $.messager.show({
                title: 'Error',
                msg: 'Please select project.'
            });
            return false;
        } else if (!provide._().is(":checked")
            && !dao._().is(":checked")
            && !service._().is(":checked")
            && !web._().is(":checked")) {
            $.messager.show({
                title: 'Error',
                msg: 'Please select modules.'
            });
            return false;
        }
        return true;
    }

    var generate = function () {
        $('#generate_form').form('nqcxSubmit', {
            url: "generator-api/generate/doit",
            onSubmit: function () {
                if (checkForm)
                    return $(this).form('validate');
                return false;
            },
            addDatas: {
                tableName: table.tableName().val(),
                tablePack: table.tablePack().val(),
                author: ws.author().val(),
                wsPath: ws.wsPath().val(),
                pName: project.pName().val(),
                pPath: project.pPath().val(),
                pPackage: project.pPackage().val(),
                pType: project.pType().filter(':checked').val(),
                provideModule: project.module.provide().val(),
                daoModule: project.module.dao().val(),
                serviceModule: project.module.service().val(),
                webModule: project.module.web().val()
            },
            success: function (result) {
                if (result.success) {
                    $.messager.show({
                        title: 'Success',
                        msg: '保存成功'
                    });
                } else {
                    $.messager.show({
                        title: 'Error',
                        msg: result.errorText
                    });
                }
            }
        });
    };

    $('#generate_btn').click(function () {
        generate();
    });
</script>
<script type="text/javascript">
    $(document).ready(function () {
        // 初始化 db 相关值
        db._init();
        // 初始化 table 相关
        table._init();
        // 初始化 ws 相关
        project._init();
    });
</script>
</body>
</html>
